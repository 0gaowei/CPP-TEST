# C++Test 测试快速开始指南

## 第一步：验证程序

在开始使用C++Test之前，先确保程序可以正常编译和运行：

```bash
# 编译主程序
make

# 运行主程序（验证功能）
./calculator

# 编译测试程序
make test

# 运行测试程序（验证测试用例）
./calculator_test
```

如果以上命令都能正常执行，说明程序代码没有问题，可以开始使用C++Test进行测试。

## 第二步：使用Parasoft C++Test进行测试

### 方式A：图形界面（推荐）

1. **打开C++Test**
   - 启动Parasoft C++Test应用程序

2. **创建项目**
   ```
   File → New → C++ Project
   项目类型：Executable
   项目名称：CalculatorProject
   位置：选择当前目录 /home/gaowei/CPP-TEST
   ```

3. **导入文件**
   - 将以下文件添加到项目：
     - calculator.h
     - calculator.cpp
     - CalculatorTest.cpp

4. **配置测试**
   - 右键项目 → Properties → C++Test
   - 或点击测试配置下拉菜单 → 新建配置
   - 配置名称：执行测试用例
   - **静态分析**：取消勾选
   - **测试执行**：勾选
   - **插桩模式**：选择"插桩"
   - **覆盖率**：勾选"语句覆盖率"、"分支覆盖率"、"函数覆盖率"

5. **运行测试**
   - 选择测试配置
   - 点击运行按钮（▶）
   - 等待测试完成

6. **查看结果**
   - 在C++Test视图中查看：
     - 测试用例执行结果
     - 代码覆盖率报告
     - 测试统计信息

### 方式B：命令行

```bash
# 设置C++Test路径（根据实际安装路径修改）
export CPPTEST_HOME=/opt/parasoft/cpptest

# 运行测试
$CPPTEST_HOME/cpptestcli \
  -config cpptest.properties \
  -compiler gcc \
  -source calculator.cpp \
  -source CalculatorTest.cpp \
  -include . \
  -report report.html

# 查看报告
# 报告将生成在 report.html 文件中
```

## 第三步：填写测试报告

使用提供的`测试报告模板.md`文件，根据C++Test生成的测试结果填写：

1. 测试执行统计
2. 代码覆盖率数据
3. 测试用例执行详情
4. 缺陷分析（如果有）

## 常见问题

### Q: 找不到C++Test命令？
A: 确保已正确安装Parasoft C++Test，并设置了环境变量。

### Q: 测试用例编译失败？
A: 检查编译器设置和包含路径是否正确。

### Q: 如何提高代码覆盖率？
A: 添加更多边界值测试和异常情况测试。

## 测试要点

1. **功能测试**：验证每个函数的基本功能
2. **边界测试**：测试边界值（0、负数、最大值等）
3. **异常测试**：测试异常情况（除零、负数阶乘等）
4. **覆盖率**：确保达到目标覆盖率（语句100%，分支95%以上）

## 项目文件说明

- `calculator.h/cpp` - 被测试的程序代码
- `CalculatorTest.cpp` - 测试用例文件
- `cpptest.properties` - C++Test配置文件
- `Makefile` - 编译配置文件
- `README.md` - 详细说明文档
- `测试报告模板.md` - 测试报告模板

祝测试顺利！

